# =============================================================================
# CONFIDENCE ENGINE - CLEANED PRODUCTION CONFIGURATION
# Core settings for hybrid_crypto_trader.py + high_risk_futures_agent.py
# =============================================================================

# === CORE SYSTEM SETTINGS ===
LOG_LEVEL=INFO
LOOKBACK_MINUTES=120

# === ESSENTIAL API CREDENTIALS ===
# Alpaca (Hybrid Agent)
ALPACA_API_KEY_ID=PKOFKZ6766SVVXVJAAZY
ALPACA_API_SECRET_KEY=z7WJwrYbRuKnbSkwev7008HSOH6rWEG0ueqzB7kw
ALPACA_BASE_URL=https://paper-api.alpaca.markets
ALPACA_DATA_URL=https://data.alpaca.markets

# Binance (Futures Agent)
BINANCE_TESTNET_API_KEY=db5d9c5f29997252d2bec6f73cbae2c0b9d1aa644fa88e7b0b982b67956a3f52
BINANCE_TESTNET_SECRET_KEY=e50d2f790f3618d7193a62549a5d05fcb49c361adcdf18160ab9fab3485e2293

# Perplexity AI
PPLX_API_KEY_1=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
PPLX_MODEL=sonar
PPLX_TIMEOUT=45

# === NOTIFICATIONS ===
# Telegram
TELEGRAM_BOT_TOKEN=8260643609:AAFN21JABXyNNMUHBtdVMxTeLhUXkVMjyv0
TELEGRAM_CHAT_ID=6677851115
TB_NO_TELEGRAM=0

# Discord Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/1404849629887205408/NPGWV0Fbp6NTqd7ZxpM9cfbT76ECCwdh5_THlRbjYOq2xL4aHIAHtdCub4afDesAofLE
DISCORD_TRADER_WEBHOOK_URL=https://discord.com/api/webhooks/1407649547185946664/YecTyfP6bvbNBQnD7E_42XOJlfU9kJhTGLRe8soAZT2Ry5OUr9kLrrrL6fmfZvd2yyoL
TB_ENABLE_DISCORD=1

# Notification Control
TB_TRADER_NOTIFY=1                   # Enable trade notifications
TB_TRADER_NOTIFY_HEARTBEAT=1         # Enable heartbeat messages
TB_HEARTBEAT_EVERY_N=3               # Send heartbeat every 3 cycles (faster testing)

# === HYBRID AGENT SETTINGS ===
TB_NO_TRADE=0                    # Live trading enabled
TB_TRADER_OFFLINE=0              # Real market data enabled
TB_OFFLINE=0                     # Real data collection enabled

# Assets & Risk Management
TB_MULTI_ASSET=1
TB_MAX_POSITIONS=6
TB_ASSET_LIST=BTCUSD,ETHUSD,ADAUSD,AVAXUSD,SOLUSD,DOTUSD,LINKUSD,UNIUSD,AAVEUSD,ATOMUSD,ALGOUSD,LTCUSD,BCHUSD,XTZUSD
TB_MAX_RISK_FRAC=0.003           # 0.3% risk per trade
TB_PORTFOLIO_VAR_LIMIT=0.02      # 2% portfolio VaR limit
TB_MAX_CORRELATION=0.7

# Signal Processing
TB_MIN_CONFIDENCE=0.15                # AGGRESSIVE LEARNING: From 0.25 to 0.15
TB_DIVERGENCE_THRESHOLD=0.12          # LOWERED: From 0.15 to 0.12  
TB_MIN_SIGNAL_QUALITY=2.5             # LOWERED: From 3.0 to 2.5
TB_MIN_CONVICTION_SCORE=3.0           # LOWERED: From 4.0 to 3.0

# Enhanced Features
TB_USE_ENHANCED_RISK=1
TB_USE_KELLY_SIZING=1
TB_USE_REGIME_DETECTION=1
TB_USE_ENSEMBLE_ML=1
TB_USE_ADAPTIVE_STRATEGY=1

# ML Configuration
TB_USE_ML_GATE=1
TB_ML_GATE_MODEL_PATH=eval_runs/ml/latest/model.pt
TB_ML_GATE_MIN_PROB=0.10              # AGGRESSIVE LEARNING: Even more trades for ML learning
TB_ML_LATEST_MAX_AGE_HR=24

# Trader Settings
TB_TRADER_TF=4h
TB_TRADER_RISK_FRAC=0.000001
TB_TRADER_INTERVAL_SEC=60
TB_TRADER_COOLDOWN_SEC=300             # REDUCED: From 900s to 300s for more frequent opportunities
TB_TRADER_MIN_NOTIONAL=10
TB_TRADER_MIN_RR=1.0                   # AGGRESSIVE LEARNING: From 1.5 to 1.0 for more qualifying trades
TB_TRADER_LONGS_ONLY=1
TB_MAX_NOTIONAL_PER_TRADE=1000

# === FUTURES AGENT SETTINGS ===
TB_ENABLE_FUTURES_TRADING=1
TB_FUTURES_PLATFORM=Binance Futures
TB_PAPER_TRADING=1               # Testnet mode

# Capital & Risk
FUTURES_AGENT_CAPITAL=15000
FUTURES_MAX_LEVERAGE=5           # Ultra-conservative leverage
FUTURES_RISK_PER_TRADE=0.003     # Ultra-conservative risk (0.3%)
FUTURES_MAX_DAILY_LOSS=0.20      # 20% max daily loss
FUTURES_MAX_POSITIONS=5          # Allow multiple high-confidence opportunities  
FUTURES_MAX_TRADES_PER_CYCLE=3   # Increased for opportunities
FUTURES_EMERGENCY_CLOSE_LEGACY=1 # Emergency position closure

# Futures Symbols
FUTURES_SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT,ADAUSDT,AVAXUSDT,DOTUSDT,LINKUSDT,UNIUSDT,AAVEUSDT,ATOMUSDT,ALGOUSDT,LTCUSDT,BCHUSDT,XRPUSDT,DOGEUSDT,NEARUSDT,SANDUSDT,MANAUSDT,CHZUSDT,ENJUSDT

# Binance Limits
BINANCE_MAX_TRADE_SIZE=5000
BINANCE_MAX_LEVERAGE=25
BINANCE_PAPER_CAPITAL=15000
BINANCE_MAX_MARGIN_PER_TRADE=100

# === DATA & AUTOMATION ===
TB_PREFERRED_DATA_SOURCE=yahoo
TB_DATA_SOURCE_FAILOVER=1
TB_AUTOCOMMIT_ARTIFACTS=1
TB_AUTOCOMMIT_INCLUDE_DB=1
TB_AUTOCOMMIT_PUSH=1

# === EXPLORATION & LEARNING SETTINGS ===
# More aggressive exploration for better learning data
TB_EPSILON_PCT=25                     # AGGRESSIVE LEARNING: 25% exploration for maximum learning
TB_EXP_PROB=0.12                     # Very low threshold during exploration windows  
TB_EXP_ATR=0.0003                    # Very low ATR requirement during exploration
TB_EPS_PROB=0.10                     # Even lower threshold for epsilon trades
TB_EPS_ATR=0.0002                    # Minimal ATR for epsilon exploration
TB_ML_PROB_FLOOR=0.08                # Lower safety floor for more learning trades

# === CORE CONSTANTS ===
SYMBOL=BTCUSD
TF_FAST=15Min
TF_SLOW=4h
TB_RETRY_ATTEMPTS=3

