# RESTORED COMPLETE CONFIGURATION 
# Combined original settings + validation improvements + blue chip expansion

# === CORE SYSTEM SETTINGS ===
LOOKBACK_MINUTES=120
LOG_LEVEL=INFO
TB_ARTIFACTS_KEEP=500

# === NOTIFICATION CHANNELS ===
# Telegram Configuration
TELEGRAM_BOT_TOKEN=8260643609:AAFN21JABXyNNMUHBtdVMxTeLhUXkVMjyv0
TELEGRAM_CHAT_ID=6677851115
TB_NO_TELEGRAM=0                 # Enable Telegram alerts

# Discord Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/1404849629887205408/NPGWV0Fbp6NTqd7ZxpM9cfbT76ECCwdh5_THlRbjYOq2xL4aHIAHtdCub4afDesAofLE
DISCORD_POLYMARKET_WEBHOOK_URL=https://discord.com/api/webhooks/1407632714680635393/AWDKIM35xTe78zwSbJALtUQfdv2KvGzvU78TEE2vubnhIKMxPR1gXa9ppI9PXmE4E4bk
DISCORD_CRYPTO_SIGNALS_WEBHOOK_URL=https://discord.com/api/webhooks/1407625986627080192/NAEsBjky_Dx1qhhxxysKo-Dg7M_6-8b5JysMFIjAdbfmVHjeYPVlaE1ua3wFwEZ_zkTL
DISCORD_TRADER_WEBHOOK_URL=https://discord.com/api/webhooks/1407649547185946664/YecTyfP6bvbNBQnD7E_42XOJlfU9kJhTGLRe8soAZT2Ry5OUr9kLrrrL6fmfZvd2yyoL
DISCORD_UNDERRATED_WEBHOOK_URL=https://discord.com/api/webhooks/1407625986627080192/NAEsBjky_Dx1qhhxxysKo-Dg7M_6-8b5JysMFIjAdbfmVHjeYPVlaE1ua3wFwEZ_zkTL
TB_ENABLE_DISCORD=1              # Enable Discord notifications

# Heartbeat & Trader Notifications (RESTORED!)
TB_TRADER_NOTIFY=1
TB_TRADER_NOTIFY_HEARTBEAT=1
TB_HEARTBEAT_EVERY_N=3           # Heartbeat every 3 cycles

# === ALPACA API CREDENTIALS ===
ALPACA_API_KEY_ID=PKOFKZ6766SVVXVJAAZY
ALPACA_API_SECRET_KEY=z7WJwrYbRuKnbSkwev7008HSOH6rWEG0ueqzB7kw
ALPACA_BASE_URL=https://paper-api.alpaca.markets
ALPACA_DATA_URL=https://data.alpaca.markets

# === PERPLEXITY API KEYS ===
PPLX_API_KEY_1=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
PPLX_MODEL=sonar
PPLX_TIMEOUT=45

# === PAPER TRADING SAFETY SETTINGS ===
TB_NO_TRADE=0                    # ENABLED: Live trading mode activated
TB_TRADER_OFFLINE=0              # Allow real market data for signals
TB_OFFLINE=0                     # Allow real data collection

# === VALIDATION IMPROVEMENTS (OPTIMIZED THRESHOLDS) ===
TB_SENTIMENT_CUTOFF=0.0          # TEMPORARILY DISABLED - API issues
TB_MIN_CONFIDENCE=0.3            # FURTHER LOWERED for technical signals only
TB_DIVERGENCE_THRESHOLD=0.15      # FURTHER LOWERED for signal collection

# === ENHANCED FEATURES FOR VALIDATION ===
TB_USE_ENHANCED_RISK=1
TB_USE_KELLY_SIZING=1
TB_USE_REGIME_DETECTION=1
TB_USE_ENSEMBLE_ML=1
TB_USE_ADAPTIVE_STRATEGY=1

# === VALIDATION TRACKING ===
TB_VALIDATION_MODE=1             # Enable validation tracking
TB_LOG_ALL_SIGNALS=1             # Log even non-trading signals

# === BLUE CHIP CRYPTO PORTFOLIO (UPDATED WITH LATEST PAIRS) ===
TB_MULTI_ASSET=1                 # Enable multi-asset trading
TB_MAX_POSITIONS=6               # Increased for more assets
TB_ASSET_LIST=BTCUSD,ETHUSD,ADAUSD,AVAXUSD,SOLUSD,DOTUSD,MATICUSD,LINKUSD,UNIUSD,AAVEUSD,ATOMUSD,ALGOUSD,LTCUSD,BCHUSD,XTZUSD

# === RISK MANAGEMENT (Adjusted for 11 assets) ===
TB_MAX_RISK_FRAC=0.003           # 0.3% per trade (reduced for more assets)
TB_PORTFOLIO_VAR_LIMIT=0.02      # 2.0% portfolio VaR
TB_MAX_CORRELATION=0.7           # Higher correlation OK with diversification

# === ML GATE CONFIGURATION ===
TB_USE_ML_GATE=1
TB_ML_GATE_MODEL_PATH=eval_runs/ml/latest/model.pt
TB_ML_FEATURES_PATH=eval_runs/ml/latest/features.csv
TB_ML_GATE_SOFT=1
TB_ML_PROB_FLOOR=0.25
TB_ML_GATE_MIN_PROB=0.25         # Lowered for more activity
TB_ML_LATEST_MAX_AGE_HR=24

# === ATR VOLATILITY FILTER ===
TB_USE_ATR_FILTER=1
TB_ATR_LEN=14
TB_ATR_MIN_PCT=0.002
TB_ATR_MAX_PCT=0.10

# === ENHANCED ML CONFIGURATION ===
TB_ML_RETRAIN_EVERY_SEC=21600
TB_ML_RETRAIN_FORCE_BACKUP=1
TB_ML_RETRAIN_MIN_ACCURACY=0.55
TB_ML_MONITOR_ENABLED=1
TB_ML_MONITOR_LOG_FILE=ml_monitor.log
TB_ML_HEALTH_CHECK_INTERVAL=3600
TB_ML_MODEL_TYPE=EnhancedMLP
TB_ML_HIDDEN_DIMS=64,32,16
TB_ML_DROPOUT_RATE=0.2
TB_ML_LEARNING_RATE=0.001
TB_ML_WEIGHT_DECAY=0.0001

# === ENTRY CONFIGURATION ===
TB_USE_1H_ENTRY=1
TB_1H_EMA_FAST=12
TB_1H_EMA_SLOW=26
TB_1H_DEBOUNCE_N=1
TB_1H_SIZE_MULT=0.6
TB_SIGNAL_DEBOUNCE_N=0

# === EXPLORATION SETTINGS ===
TB_EPSILON_PCT=15
TB_EXP_PROB=0.28
TB_EPS_PROB=0.25

# === TRADER CONFIGURATION ===
TB_TRADER_TF=4h
TB_TRADER_RISK_FRAC=0.000001
TB_TRADER_INTERVAL_SEC=60
TB_TRADER_COOLDOWN_SEC=900
TB_TRADER_MIN_NOTIONAL=10
TB_TRADER_ENTRY_TOL_BPS=10
TB_TRADER_ENTRY_MID_ZONE=1
TB_TRADER_ORDER_TTL_MIN=30
TB_TRADER_MIN_RR=2.0
TB_TRADER_LONGS_ONLY=1
TB_TRADER_ALLOW_SHORTS=0
TB_TRADER_SYMBOLS=BTCUSD,ETHUSD,ADAUSD,AVAXUSD,SOLUSD,DOTUSD,MATICUSD,LINKUSD,UNIUSD,AAVEUSD,ATOMUSD,ALGOUSD,LTCUSD,BCHUSD,XTZUSD
TB_MAX_NOTIONAL_PER_TRADE=1000

# === DIGEST & REPORTING ===
TB_HUMAN_DIGEST=1
TB_DIGEST_INCLUDE_WEEKLY=1
TB_DIGEST_INCLUDE_ENGINE=1
TB_DIGEST_MAX_TFS=2
TB_DIGEST_DRIFT_WARN_PCT=0.5
TB_DIGEST_TOP_ALTS=ALL
TB_DIGEST_EXPLAIN_HIGH_RISK_ACTION=1
TB_DIGEST_HIDE_EQUITIES_IF_NO_DATA=1

# === MULTI-SOURCE DATA PROVIDER (FREE ALTERNATIVES TO ALPACA) ===
TB_ENABLE_MULTI_SOURCE_DATA=1                 # Enable multi-source data provider
TB_PREFERRED_DATA_SOURCE=yahoo                # Options: yahoo, binance, coingecko, alphavantage
TB_DATA_SOURCE_FAILOVER=1                     # Enable automatic failover between sources
ALPHA_VANTAGE_API_KEY=                        # Get free key from https://www.alphavantage.co/support/#api-key

# === UNDERRATED SCANNER ===
TB_UNDERRATED_RUN_INTERVAL_DAYS=0
TB_UNDERRATED_MARKETCAP_THRESHOLD=100000000
TB_UNDERRATED_ALERT_DISCORD=1
TB_UNDERRATED_ALERT_TELEGRAM=1
TB_UNDERRATED_STORE=data/underrated_store.json
TB_UNDERRATED_OUTDIR=underrated_runs

# === GIT AUTOMATION ===
TB_UNIVERSE_GIT_AUTOCOMMIT=1
TB_UNIVERSE_GIT_PUSH=1
TB_UNIVERSE_GIT_PUSH_DEFAULT=1
TB_EVAL_GIT_AUTOCOMMIT=1
TB_EVAL_GIT_PUSH=1
TB_EVAL_GIT_INCLUDE_DATA=0
TB_AUTOCOMMIT_DOCS=1
TB_AUTOCOMMIT_ARTIFACTS=1            # Enable auto-commit of artifacts including DB
TB_AUTOCOMMIT_INCLUDE_DB=1           # Include database files in auto-commit

# === GRADING & CONFIDENCE ===
TB_POLYMARKET_SHOW_CONFIDENCE=0
TB_SHOW_ASSET_CONFIDENCE_IN_CHAT=0
TB_GRADE_W_CONF=0.45
TB_GRADE_W_CONFCHK=0.35
TB_GRADE_W_ALIGN=0.20
TB_GRADE_THRESH_A=0.85
TB_GRADE_THRESH_B=0.70
TB_GRADE_THRESH_C=0.55

# === HEALTH & AUDITING ===
TB_AUDIT=1
TB_HEALTH_ML_PROB_LOOKBACK=20

# === EXTERNAL API TOKENS ===
TB_COINGECKO_API=https://api.coingecko.com/api/v3
GITHUB_TOKEN=
TWITTER_BEARER_TOKEN=

# === MISSING CRITICAL VARIABLES (ADDED) ===
TB_AUTOCOMMIT_PUSH=1             # Enable git push for autocommit
TB_RETRY_ATTEMPTS=3              # Number of retry attempts for API calls
SYMBOL=BTCUSD                   # Default symbol for single asset mode
TF_FAST=15Min                    # Fast timeframe for EMA calculations
TF_SLOW=4h                       # Slow timeframe for trend analysis

# === FUTURES & PERPETUALS TRADING (BINANCE PRIMARY & ONLY) ===
TB_ENABLE_FUTURES_TRADING=1                 # Enable futures and perpetuals trading
TB_FUTURES_PLATFORM=Binance Futures         # Primary platform: Binance testnet for live trades
TB_MAX_LEVERAGE=25                          # Maximum leverage (25x hard cap per trade)
TB_PAPER_TRADING=1                          # Testnet/Paper trading mode (safe testing)

# Futures Platform API Keys (Testnet - Primary & Only: Binance)
BINANCE_TESTNET_API_KEY=db5d9c5f29997252d2bec6f73cbae2c0b9d1aa644fa88e7b0b982b67956a3f52
BINANCE_TESTNET_SECRET_KEY=e50d2f790f3618d7193a62549a5d05fcb49c361adcdf18160ab9fab3485e2293
# BYBIT DISABLED UNTIL API AUTHENTICATION RESOLVED
# BYBIT_TESTNET_API_KEY=GKu4fdcjlVb83WR5kf
# BYBIT_TESTNET_SECRET_KEY=SldyHk6z2tXVXQC0qLcGI41gVBVCAyI5ymbR


# High-Risk Futures & Perpetuals Configuration (BINANCE PRIMARY & ONLY)
FUTURES_AGENT_CAPITAL=15000                 # Binance testnet capital  
FUTURES_MAX_LEVERAGE=5                     # ðŸ¤– AUTO-OPTIMIZED: Based on current performance
FUTURES_RISK_PER_TRADE=0.003                # ðŸ¤– AUTO-OPTIMIZED: ULTRA_CONSERVATIVE
FUTURES_MAX_DAILY_LOSS=0.20                 # 20% max daily loss
FUTURES_SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT,ADAUSDT,AVAXUSDT,DOTUSDT,LINKUSDT,UNIUSDT,AAVEUSDT,ATOMUSDT,ALGOUSDT,LTCUSDT,BCHUSDT,XRPUSDT,DOGEUSDT,NEARUSDT,SANDUSDT,MANAUSDT,CHZUSDT,ENJUSDT
FUTURES_MAX_POSITIONS=1                     # ðŸ¤– AUTO-OPTIMIZED: Quality over quantity
FUTURES_MAX_TRADES_PER_CYCLE=2              # ðŸ”§ REDUCED: 2 trades per cycle (was 3) for quality over quantity
FUTURES_EMERGENCY_CLOSE_LEGACY=1            # ðŸš¨ AUTO-CLOSE: Close legacy positions when ultra-conservative mode starts

# Dynamic Margin & Leverage Limits (BINANCE HARD CAPS)
BINANCE_MAX_TRADE_SIZE=5000                 # $5k max per trade on Binance 
BINANCE_MAX_LEVERAGE=25                     # 25x leverage hard cap for Binance
BINANCE_PAPER_CAPITAL=15000                 # 15,000 USDT testnet capital for Binance
BINANCE_MAX_MARGIN_PER_TRADE=100            # $100 hard cap margin per trade

# BYBIT DISABLED (API Authentication Issues)
# BYBIT_MAX_TRADE_SIZE=10000                  # Disabled until API fixed
# BYBIT_MAX_LEVERAGE=100                      # Disabled until API fixed
# BYBIT_PAPER_CAPITAL=100000                  # Disabled until API fixed
# BYBIT_MAX_MARGIN_PER_TRADE=1000             # Disabled until API fixed

# Smart Leverage Configuration
LEVERAGE_RISK_MULTIPLIER=1.5                # Risk multiplier for leverage calculation
LEVERAGE_VOLATILITY_THRESHOLD=0.05          # 5% volatility threshold for leverage adjustment
LEVERAGE_MARKET_REGIME_MULTIPLIER=1.2       # Multiplier for trending vs ranging markets

# Adding Phase 1C Configuration to .env
TB_MIN_SIGNAL_QUALITY=3.0                   # ðŸ”§ INCREASED: 3.0 (was 1.0) for higher quality trades
TB_MIN_CONVICTION_SCORE=4.0                 # ðŸ”§ INCREASED: 4.0 (was 2.0) for stronger conviction only
DISCORD_WEBHOOK_URL_ENHANCED=https://discord.com/api/webhooks/1407649547185946664/YecTyfP6bvbNBQnD7E_42XOJlfU9kJhTGLRe8soAZT2Ry5OUr9kLrrrL6fmfZvd2yyoL

